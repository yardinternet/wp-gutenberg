(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element,n=window.wp.blockEditor,o=window.wp.components,r=window.wp.i18n,i=window.wp.data,a=window.wp.notices,l=window.wp.hooks,c=e=>{let{onChange:n,icon:c}=e;const[s,p]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),[d,w]=(0,t.useState)([]),{createNotice:h}=(0,i.useDispatch)(a.store),E=(0,l.applyFilters)("yard-blocks.fontawesome-styles",["solid","regular","light","thin","duotone","brands"]),k=()=>{h("error",(0,r.__)("Momenteel kunnen er geen iconen worden opgehaald, probeer het later nog een keer."),{isDismissible:!0,type:"snackbar",id:"icon-picker-control-error"})};return(0,t.createElement)(t.Fragment,null,c&&(0,t.createElement)("i",{className:c+" icon-picker-control-preview-icon"}),(0,t.createElement)(o.SearchControl,{placeholder:(0,r.__)("Zoek een icoon"),value:u,help:(0,r.__)("Gebruik Engelse termen om een icoon te zoeken."),onChange:e=>{m((()=>e)),(async e=>{const t=await(e=>{const t=`{ search(version: "6.1.2", first: 100, query: "${e}") { id styles } }`;return fetch("https://api.fontawesome.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:t})}).then((e=>e.json())).catch((()=>k()))})(e);if(!t)return;if(t.errors)return k();const n=t.data.search.reduce(((e,t)=>((e=>e.styles.filter((e=>{var t;return null!==(t=E.includes(e))&&void 0!==t&&t})).map((t=>`fa-${t} fa-${e.id}`)))(t).forEach((t=>{e.push(t)})),e)),[]);n&&(w((()=>n)),p((()=>!0)))})(e)}}),s&&u&&(0,t.createElement)(o.Popover,{title:(0,r.__)("Kies een icoon"),onClose:()=>p((()=>!1)),focusOnMount:!1},(0,t.createElement)("div",{className:"icon-picker-control-popover-container"},d?.map(((e,r)=>(0,t.createElement)("div",{className:"icon-picker-control-popover-btn-container",key:r},(0,t.createElement)(o.Button,{onClick:()=>{n(e),m((()=>"")),p((()=>!1))}},(0,t.createElement)("i",{className:e}))))),!d.length&&(0,t.createElement)("p",null,(0,r.__)("Er zijn geen iconen gevonden")))))},s=e=>{const{setAttributes:i,attributes:a}=e,{iconSize:l,icon:s,altText:p}=a;return(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(o.PanelBody,{title:(0,r.__)("Kies een icoon")},(0,t.createElement)(c,{icon:s,onChange:e=>{void 0!==e&&i({icon:e})}})),(0,t.createElement)(o.PanelBody,{title:(0,r.__)("Grootte")},(0,t.createElement)(n.FontSizePicker,{label:"Grootte",value:l,onChange:e=>i({iconSize:e}),withReset:!0,withSlider:!0})),(0,t.createElement)(o.PanelBody,{title:(0,r.__)("Toegankelijkheid"),initialOpen:!1},(0,t.createElement)(o.TextControl,{label:(0,r.__)("Alternatieve tekst"),value:p,onChange:e=>i({altText:e}),help:(0,r.__)("Voeg een alternatieve tekst toe als een icoon betekenis heeft.")})))},p=e=>{const{attributes:n}=e,{icon:o,altText:r}=n;return(0,t.createElement)("i",{className:o,title:r||null})},u=JSON.parse('{"u2":"yard-gutenberg/icon"}');(0,e.registerBlockType)(u.u2,{edit:e=>{const{attributes:o}=e,{iconSize:r}=o;return(0,t.createElement)("div",(0,n.useBlockProps)(),(0,t.createElement)(s,e),(0,t.createElement)(p,e))},save:e=>{const{attributes:o}=e,{altText:r,iconSize:i}=o;return(0,t.createElement)("div",n.useBlockProps.save(),(0,t.createElement)(p,e),r&&(0,t.createElement)("span",{className:"sr-only"},r))}})})();